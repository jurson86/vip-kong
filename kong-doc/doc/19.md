##  插件解析 
 
###  限流插件

#### 功能

限流可以认为是服务降级的一种，限制系统的流量，达到保护系统的目的。
一般来说系统的吞吐量是可以被测算的，为了保证系统的稳定运行，一旦达到的需要限制的阈值，就需要限制流量并采取一些措施以完成限制流量的目的。

比如：延迟处理，拒绝处理，或者部分拒绝处理等等。

限流方案：

- 限制资源的链接数；
- 限制资源的并发请求数；
- 设置单位时间内访问次数；

限流维度：

1. 基于访问URI限流，确保URI资源的稳定性；
2. 基于客户端IP地址限流，防止特定IP的刷单行为；
3. 基于客户端用户限流，防止特定用户的刷单行为；



#### 配置方案
插件名称： tdwlimitwithresty


![19](19_images\19.png)

配置说明：  

- conn_enable: 是否启用链接限流
- req_enable:  是否启用请求限流
- conn_burst : 突发链接数
- conn_delay: 超流链接延迟时间
- conn_concurrent_max 最大连接数
- req_burst： 突发请求数
- req_rate:  每秒限流请求速率
- userkey:  用户token键名称
- enable:  插件是否启用



