webpackJsonp([4],{"2NXm":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("BO1k"),a=s.n(r),o=s("Dd8w"),i=s.n(o),n={data:function(){return{activeMenu:""}},created:function(){var e=sessionStorage.getItem("activeMenu");e&&(this.activeMenu=e)},methods:{handleSelect:function(e){sessionStorage.setItem("activeMenu",e),this.$router.push({name:e})}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-menu",{staticClass:"el-menu-vertical",attrs:{"default-active":e.activeMenu,"background-color":"#fdfdfd","text-color":"#333","active-text-color":"#409eff"},on:{select:e.handleSelect}},[s("el-menu-item",{attrs:{index:"home"}},[s("i",{staticClass:"el-icon-location"}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("首页")])]),e._v(" "),s("el-menu-item",{attrs:{index:"apis"}},[s("i",{staticClass:"el-icon-menu"}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("APIs")])]),e._v(" "),s("el-menu-item",{attrs:{index:"upstreams"}},[s("i",{staticClass:"el-icon-printer"}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("服务")])]),e._v(" "),s("el-menu-item",{attrs:{index:"userList"}},[s("i",{staticClass:"el-icon-document"}),e._v(" "),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("用户列表")])])],1)},staticRenderFns:[]},u=s("VU/8")(n,l,!1,null,null,null).exports,c=s("9rMa"),d={components:{Menu:u},data:function(){var e=this;return{dialogFormVisible:!1,formData:{password:"",newPassword:"",confirmPassword:""},rules:{password:[{validator:function(e,t,s){t?s():s(new Error("请输入旧密码"))},trigger:"blur"}],newPassword:[{validator:function(e,t,s){t?s():s(new Error("请输入新密码"))},trigger:"blur"}],confirmPassword:[{validator:function(t,s,r){s?s!==e.formData.newPassword?r(new Error("确认密码与新密码不一致")):r():r(new Error("请再次输入新密码"))},trigger:"blur"}]},userList:[],curUserGroup:"",userInfo:""}},created:function(){this.getUserList(),this.userInfo=localStorage.getItem("userInfo")},computed:i()({},Object(c.b)(["suffix"])),methods:i()({},Object(c.c)({login_out:"LOGIN_OUT",setCurUserGroup:"SET_CURUSERGROUP"}),{logout:function(){this.login_out(),this.$router.push({name:"login"}),sessionStorage.removeItem("activeMenu")},closeDialog:function(){this.$refs.form.resetFields()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.$post("/user/update_password"+t.suffix,{password:t.formData.password,newPassword:t.formData.newPassword}).then(function(e){0==e.code?(t.$message({type:"success",message:"修改成功"}),setTimeout(function(){t.dialogFormVisible=!1},1e3)):t.$message({type:"warning",message:e.message})})})},getUserList:function(){var e=this;this.$get("/user/group/list"+this.suffix).then(function(t){if(0==t.code){e.userList=t.data;var s=!0,r=!1,o=void 0;try{for(var i,n=a()(t.data);!(s=(i=n.next()).done);s=!0){var l=i.value;l.defaultFlag&&(e.curUserGroup=l.group,e.setCurUserGroup(l.group))}}catch(e){r=!0,o=e}finally{try{!s&&n.return&&n.return()}finally{if(r)throw o}}}else e.$message({type:"warning",message:t.message})})},changeGroup:function(e){var t=this;this.$post("/user/group/switch_group/"+e+this.suffix).then(function(s){0==s.code?(t.$message({type:"success",message:"组切换成功"}),t.setCurUserGroup(e),t.getUserList()):t.$message({type:"warning",message:s.message})})}})},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("el-container",{staticClass:"wrapper-container"},[s("el-aside",{staticClass:"wrapper-aside",attrs:{width:"240px"}},[s("Menu")],1),e._v(" "),s("el-container",[s("el-header",[s("span",[e._v("kong-admin管理系统")]),e._v(" "),s("div",{staticStyle:{float:"right"}},[s("span",{staticStyle:{"margin-right":"10px"}},[e._v("欢迎您，"+e._s(e.userInfo))]),e._v("\n\t\t\t\t\t切换组：\n\t\t\t\t\t"),s("el-select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{size:"small"},on:{change:e.changeGroup},model:{value:e.curUserGroup,callback:function(t){e.curUserGroup=t},expression:"curUserGroup"}},e._l(e.userList,function(e,t){return s("el-option",{key:t,attrs:{value:e.group}})})),e._v(" "),s("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"text",icon:"el-icon-edit-outline"},on:{click:function(t){e.dialogFormVisible=!0}}},[e._v("修改密码")]),e._v(" "),s("el-button",{staticStyle:{"margin-top":"10px"},attrs:{type:"text",icon:"el-icon-sold-out"},on:{click:e.logout}},[e._v("退出系统")])],1)]),e._v(" "),s("el-main",[s("router-view")],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"修改密码",visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeDialog}},[s("el-form",{ref:"form",attrs:{model:e.formData,rules:e.rules,"label-width":"100px",size:"small"}},[s("el-form-item",{attrs:{label:"旧密码",prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"旧密码"},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[s("el-input",{attrs:{type:"password",placeholder:"新密码"},model:{value:e.formData.newPassword,callback:function(t){e.$set(e.formData,"newPassword",t)},expression:"formData.newPassword"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认新密码",prop:"confirmPassword"}},[s("el-input",{attrs:{type:"password",placeholder:"确认新密码"},model:{value:e.formData.confirmPassword,callback:function(t){e.$set(e.formData,"confirmPassword",t)},expression:"formData.confirmPassword"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("form")}}},[e._v("确定")]),e._v(" "),s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]},p=s("VU/8")(d,m,!1,null,null,null);t.default=p.exports},hMra:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("router-view")],1)},staticRenderFns:[]},a=s("VU/8")(null,r,!1,null,null,null);t.default=a.exports}});